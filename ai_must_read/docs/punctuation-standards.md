# 中文竖排标点符号标准对比

本文档整理大陆和台湾在竖排排版中对标点符号的处理标准，作为 luatex-cn 标点模块实现的参考依据。

## 1. 标准来源

### 大陆

- **GB/T 15834-2011**《标点符号用法》（国家标准）
  - 第 4.15 节：竖排文稿中标点符号的用法
- **W3C CLREQ**（中文排版需求）
  - https://www.w3.org/TR/clreq/
  - 第 3.1 节：标点符号的宽度调整

### 台湾

- **教育部《重訂標點符號手冊》**（修訂版）
  - https://language.moe.gov.tw/001/upload/files/site_content/M0001/hau/f2.html
- **CNS 標準**（中華民國國家標準）
  - 直排標點符號居中置放

## 2. 标点符号分类

| 类型 | 包含符号 | 说明 |
|------|---------|------|
| 句号类 (fullstop) | 。．| 句末标点 |
| 逗号类 (comma) | ，、| 句中停顿 |
| 中间类 (middle) | ：；！？ | 功能性标点 |
| 开括号 (open) | 「『（〈《【〔"' | 开启引用/括注 |
| 闭括号 (close) | 」』）〉》】〕"' | 结束引用/括注 |
| 不可断 (nobreak) | —— …… | 成对使用的线类符号 |

## 3. 大陆标准（GB/T 15834-2011）

### 3.1 竖排标点位置

GB/T 15834-2011 第 4.15 条规定：

> 竖排文稿中，句号、问号、叹号、逗号、顿号、分号和冒号放在相应文字之下偏右。

具体规则：
- **句号（。）**：置于字格偏右上方，占一个完整字格
- **逗号（，）、顿号（、）**：置于字格偏右，可占半格（挤压排版时）
- **冒号（：）、分号（；）、叹号（！）、问号（？）**：偏右放置
- **引号**：竖排使用「」『』形式（即竖排引号），不使用""''
- **括号**：竖排使用对应的竖排形式（︵︶等）
- **破折号（——）**：竖排时旋转为竖排形式（︱）
- **省略号（……）**：竖排时旋转为竖排形式（︙）

### 3.2 标点宽度（挤压）

W3C CLREQ 规定：
- 点号类（句号、逗号等）的字形仅占半个字宽，另一半为空白
- 相邻标点之间可以进行挤压（squeeze），去除多余空白
- **句号**：由于位置特殊（居右上），通常保持全角不挤压
- **逗号、顿号**：可挤压至半角
- **括号类**：可挤压至半角

## 4. 台湾标准（教育部《重訂標點符號手冊》）

### 4.1 竖排标点位置

台湾标准的核心原则：

> 直排時，標點符號均置於字格正中央。

具体规则：
- **所有标点**：居中放置在字格正中央
- **句号（。）**：居中，占一个完整字格
- **逗号（，）、顿号（、）**：居中，占一个完整字格
- **冒号（：）、分号（；）、叹号（！）、问号（？）**：居中
- **引号**：台湾竖排同样使用「」『』
- **括号**：使用对应竖排形式

### 4.2 标点宽度

- **所有标点均占一个完整字格（全角）**
- **不进行挤压**
- 台湾排版强调整齐的格式，标点符号不做半角处理

## 5. 两岸差异对比

| 特征 | 大陆 | 台湾 |
|------|------|------|
| 句号位置 | 偏右上 | 居中 |
| 逗号位置 | 偏右 | 居中 |
| 其他标点位置 | 偏右 | 居中 |
| 标点宽度 | 可半角挤压 | 全角（不挤压）|
| 相邻标点间距 | 挤压减小 | 不挤压 |
| 引号形式 | 「」『』（竖排） | 「」『』（竖排） |
| 括号形式 | 竖排形式 | 竖排形式 |

## 6. luatex-cn 实现说明

### 6.1 实现文件

- **标点插件**: `tex/core/luatex-cn-core-punct.lua`
- **标点设置**: `tex/core/luatex-cn-core-punct.sty`

### 6.2 三阶段处理

1. **Flatten 阶段**: 分类标点类型、替换竖排字形
2. **Layout 阶段**: 挤压调整（大陆模式：半角挤压；台湾模式：不挤压）
3. **Render 阶段**: 位置偏移（大陆模式：偏右/偏右上；台湾模式：居中无偏移）

### 6.3 配置方式

```latex
% 大陆模式（cn-vbook 默认）
\punctSetup{punct-style=mainland}

% 台湾模式（tw-vbook 默认）
\punctSetup{punct-style=taiwan}
```

### 6.4 大陆模式偏移量

```
句号 (。)：x = +0.20 字宽, y = +0.25 字高（右上偏移）
逗号 (，、)：x = +0.20 字宽（右偏移）
中间类 (：；！？)：x = +0.20 字宽（右偏移）
括号类：无偏移（居中）
```

## 7. 参考资料

1. GB/T 15834-2011《标点符号用法》
2. 教育部《重訂標點符號手冊》（修訂版）
3. W3C CLREQ - Requirements for Chinese Text Layout: https://www.w3.org/TR/clreq/
4. JLREQ - Requirements for Japanese Text Layout（竖排参考）: https://www.w3.org/TR/jlreq/
