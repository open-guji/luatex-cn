% debug_banxin.tex
\documentclass{article}
\usepackage{geometry}
\geometry{paperwidth=300pt, paperheight=400pt}
\usepackage{cn_vertical}

\directlua{
    local render_banxin = require('render_banxin')
    _G.cn_vertical.hooks.is_reserved_column = function(col, interval)
        print("[debug_banxin] is_reserved_column called for col " .. col)
        return (col \% 3) == 2  -- 0, 1 text, 2 banxin
    end
    _G.cn_vertical.hooks.render_reserved_column = function(p_head, params)
        print("[debug_banxin] render_reserved_column called for col " .. params.col)
        return render_banxin.draw_banxin_column(p_head, params)
    end
}

\begin{document}
\VerticalRTT[grid-width=30pt, grid-height=30pt, n-column=2, border=true]{
子曰：學而時習之，不亦說乎？
有朋自遠方來，不亦樂乎？
人不知而不慍，不亦君子乎？
}
\end{document}
