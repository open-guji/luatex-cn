% Copyright 2026 Open-Guji (https://github.com/open-guji)
%
% Licensed under the Apache License, Version 2.0 (the "License");
% you may not use this file except in compliance with the License.
% You may obtain a copy of the License at
%
%     http://www.apache.org/licenses/LICENSE-2.0
%
% Unless required by applicable law or agreed to in writing, software
% distributed under the License is distributed on an "AS IS" BASIS,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
% See the License for the specific language governing permissions and
% limitations under the License.

% luatex-cn-guji-HongLouMengJiaXuBen.cfg
% Configuration for Hong Lou Meng Jiaxu Ben (红楼梦甲戌本)
% Based on the manuscript format of the Jiaxu edition

% =============================================================================
% Grid Calculation (derived from page geometry)
% =============================================================================
%
% Page dimensions (spread):
%   paper-width = 19cm × 2 = 38cm = 1077.2pt
%   paper-height = 38cm = 1077.2pt
%
% Single page: 38cm (H) × 19cm (W)
%
% Layout from manuscript:
%   - 12 columns per half page (+ banxin center column = 25 total)
%   - 18 characters per column
%   - Thin borders with single-line frame
%   - Narrow banxin with yuwei (fish tail)
%
% Margins (estimated from proportions):
%   top margin ≈ 3cm, bottom margin ≈ 2.5cm
%   left/right margin ≈ 2cm each
%
% Width calculation:
%   content-width = 1077.2 - 57 - 57 = 963.2pt
%   25 columns: grid-width = 963.2 / 25 ≈ 38.5pt
%
% =============================================================================

\gujiSetup{
    % ==========================================================================
    % Page Geometry (Spread - two pages side by side)
    % ==========================================================================
    paper-width = 1077.2pt,   % 38cm (19cm × 2)
    paper-height = 1077.2pt,  % 38cm
    margin-top = 85pt,        % ~3cm
    margin-bottom = 71pt,     % ~2.5cm
    margin-left = 57pt,       % ~2cm
    margin-right = 57pt,      % ~2cm

    % ==========================================================================
    % Border Configuration
    % ==========================================================================
    border = false,
    outer-border = false,
    border-padding-top = 3pt,
    border-padding-bottom = 3pt,

    % ==========================================================================
    % Grid Configuration (25 cols × 18 chars)
    % ==========================================================================
    % Number of columns per half page (excluding Banxin center column)
    n-column = 12,
    % Number of characters per column (grid-height auto-calculated)
    n-char = 18,
    % Grid width calculation:
    %   content-width = 1077.2 - 57 - 57 = 963.2pt
    %   25 columns: grid-width = 963.2 / 25 ≈ 38.5pt
    grid-width = 38.5pt,

    % ==========================================================================
    % Banxin (版心) Configuration
    % ==========================================================================
    % Jiaxu edition has a narrower banxin with distinctive proportions
    % Upper section for title, middle for content, lower with fish tail
    banxin-upper-ratio = 0.25,
    banxin-middle-ratio = 0.55,
    banxin-lower-ratio = 0.20,

    chapter-title-top-margin = 40pt,
    chapter-title-font-size = 18pt,
    chapter-title-grid-height = 50pt,
    % Enable lower yuwei (下鱼尾) - characteristic of this edition
    lower-yuwei = true,

    % ==========================================================================
    % Typography
    % ==========================================================================
    % Font size matches grid height for 18 chars per column
    font-size = 30pt,
    line-spacing = 45pt,
    font-name = TW-Kai,
    vertical-align = center,

    % Jiazhu (dual-column notes) alignment
    jiazhu-align = outward,
}


\endinput
