% luatex_cn.sty
% LuaTeX package for Chinese typesetting support
% Main wrapper package that loads sub-packages and exposes unified interface
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{luatex_cn}[2026/01/15 v1.0.0 Chinese typesetting support for LuaTeX]

% Load expl3 (LaTeX3 programming layer)
\RequirePackage{expl3}
\ExplSyntaxOn

% Check if LuaTeX is being used
\RequirePackage{ifluatex}
\ifluatex\else
  \PackageError{luatex_cn}{This package requires LuaTeX}{%
    Please compile your document with LuaLaTeX instead of pdfLaTeX or XeLaTeX.}
\fi

% ============================================================================
% Package Options
% ============================================================================
\bool_new:N \g_luatexcn_banxin_bool
\bool_new:N \g_luatexcn_traditional_bool
\bool_new:N \g_luatexcn_simplified_bool

% Default: simplified Chinese
\bool_set_true:N \g_luatexcn_simplified_bool

% Define package options
\DeclareOption{banxin}
  {
    \bool_set_true:N \g_luatexcn_banxin_bool
  }
\DeclareOption{traditional}
  {
    \bool_set_true:N \g_luatexcn_traditional_bool
    \bool_set_false:N \g_luatexcn_simplified_bool
  }
\DeclareOption{simplified}
  {
    \bool_set_true:N \g_luatexcn_simplified_bool
    \bool_set_false:N \g_luatexcn_traditional_bool
  }

\ProcessOptions\relax

% ============================================================================
% Load Sub-packages (from their respective directories)
% ============================================================================

% Core vertical typesetting engine (always loaded)
\RequirePackage{vertical}

% Banxin (版心) features - optional
\bool_if:NT \g_luatexcn_banxin_bool
  {
    \RequirePackage{banxin}
  }

% ============================================================================
% Interface Documentation
% ============================================================================
% This package exposes the following commands from sub-packages:
%
% From vertical:
%   \VerticalRTT[options]{content}  - Main vertical layout command
%   \GridTextbox[options]{content}  - Grid-based textbox
%   \GridParagraph                  - Environment for grid paragraphs
%   \jiazhu{content}                - Interlinear notes (夹注)
%   \EmptyBox[height]               - Empty placeholder box
%   \Space[width]                   - Explicit spacing
%   \cnvdebugon / \cnvdebugoff      - Debug toggle
%   \GujiDebugOn / \GujiDebugOff    - Alias for debug toggle
%
% From banxin (when loaded with [banxin] option):
%   \banxinSetup{options}           - Configure banxin settings
%   \setBookName{name}              - Set book name for banxin
%   \setChapterTitle{title}         - Set chapter title
%
% Document Class:
%   Use \documentclass{guji} for full ancient book layout
% ============================================================================

% Version info
\newcommand{\luatexcnversion}{1.0.0}

% Main package initialization
\PackageInfo{luatex_cn}{Chinese typesetting package v\luatexcnversion\space loaded}

\ExplSyntaxOff

\endinput
