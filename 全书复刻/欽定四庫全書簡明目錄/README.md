# 欽定四庫全書簡明目錄

文本来源：https://ctext.org/wiki.pl?if=gb&chapter=3658735 

## 文件说明

- `source/column1.txt` - 原始文本文件（从扫描件提取）
- `source/column1.json` - 解析后的结构化 JSON 数据
- `parse_to_json.py` - 文本解析脚本
- `tex/` - LaTeX 排版文件

## 使用解析脚本

### 运行脚本

```bash
cd /home/lishaodong/workspace/luatex-cn/全书复刻/欽定四庫全書簡明目錄
python3 parse_to_json.py
```

### 输出格式

脚本会将 `source/column1.txt` 解析为 `source/column1.json`，格式如下：

```json
[
  {
    "title": "《书名》卷数",
    "detail": "详细描述...",
    "comment": "謹案：评论内容..."
  }
]
```

### 字段说明

- **title**: 书籍标题（如《周易鄭康成注》一卷）
- **detail**: 详细描述（作者、版本、内容简介等）
- **comment**: 四库馆臣评论（通常以"謹案："或"謹按："开头）

### 解析统计

- 共解析 **167** 本书籍
- 自动清理了 XML 标签和扫描标记
- 自动识别并分类 title、detail、comment

## 示例

### 示例 1：有详细和评论

```json
{
  "title": "《子夏易傳》十一卷",
  "detail": "舊本題卜子夏撰，實後人輾轉依托，非其原書。然唐、宋以來，流傳已久，今仍錄冠易類之首。凡托名之書，仍從其所托之時代，《漢書·藝文志》例也。",
  "comment": "謹案：唐徐堅《初學記》以太宗御制升列歷代之前，蓋尊尊之大義。焦竑《國史經籍志》，朱彞尊《經義考》並踵前規。臣等編摩《四庫》，初亦恭錄《御定易經通注》《御纂周易折中》《御纂周易述義》，弁冕諸經。仰蒙指示，命冠於國朝著述之首，俾尊卑有序，而時代不淆。聖度謙沖，酌中立憲，實為千古之大公。謹恪遵彞訓，仍託始於《子夏易傳》。並發凡於此，著《四庫》之通例焉。"
}
```

### 示例 2：只有详细，无评论

```json
{
  "title": "《陸氏易解》一卷",
  "detail": "吳陸績撰。原本散佚，明姚士粦採陸氏《經典釋文》、李氏《周易集解》及績《京氏易傳註》輯為此本，凡一百五十條。",
  "comment": ""
}
```

## 脚本功能

1. **自动清理标记**
   - 移除 `<scanbreak>`, `<scanbegin>`, `<scanend>` 等扫描标记
   - 移除 `<entity>` 标签，保留实体名称
   - 清理多余空白字符

2. **智能分类**
   - 识别书名标题（`***《书名》卷数`）
   - 区分详细描述和评论（以"謹案："或"謹按："开头）
   - 自动聚合同一书籍的多段内容

3. **结构化输出**
   - 标准 JSON 格式
   - UTF-8 编码
   - 缩进美化，易于阅读

## 后续使用

生成的 JSON 数据可用于：
- 生成 LaTeX 排版文件
- 数据分析和统计
- Web 展示
- 数据库导入
